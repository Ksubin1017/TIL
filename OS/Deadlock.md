# 교착 상태(Deadlock)

일어나지 않을 사건을 기다리며 프로세스의 진행이 멈추는 현상

**예시**

- 프로세스 A는 자원 X를 점유한 채 자원 Y 대기
- 프로세스 B는 자원 Y을 점유한 채 자원 X 대기

위 과정에서 두 프로세스는 대기하고 있는 자원을 무한히 기다리며 동작을 멈추게 된다.

---

## 교착 상태 발생 조건

1. **상호 배제**
   - 한 번에 하나의 프로세스만 해당 자원을 이용 가능
   - 어떤 프로세스가 사용하는 자원을 다른 프로세스가 사용할 수 없는 상태

2. **점유와 대기**
   - 한 프로세스가 자원을 할당 받은 상태(점유)에서 다른 자원을 할당받기를 대기

3. **비선점**
   - 해당 자원을 이용하고 있는 프로세스의 작업이 끝나야 자원을 이용 가능
   - 다른 프로세스가 해당 자원을 강제로 빼앗지 못함

4. **원형 대기**
   - 프로세스와 요청한 자원이 원의 형태를 이루는 경우
   - 예: 프로세스 A, B가 자원 X, Y를 각각 점유하며 서로 기다리는 상황

> 교착 상태는 위 4가지 조건을 모두 만족해야 발생

---

## 교착 상태 해결 방법

### 1. 예방
교착 상태를 발생시키는 4가지 조건 중 하나를 충족하지 못하게 하는 방법

- 한 프로세스에 자원을 모두 몰아주고 작업이 끝나면 다음 프로세스에게 자원을 몰아주기  
  → 점유와 대기 조건 만족 X
- 할당 가능한 모든 자원에 번호를 부여하고 오름차순으로 할당  
  → 원형 대기 조건 만족 X

### 2. 회피
교착 상태가 발생하지 않을 정도로 조심하면서 자원을 할당하는 방법

- 자원이 충분한 상황에서 프로세스들이 적은 자원을 요청하면 교착 상태 발생하지 않음
- 하지만 한정된 자원을 한 번에 많이 요청하면 교착 상태 발생 위험 증가

### 3. 검출 후 회복
교착 상태의 발생을 인정하고 사후 처리

- 운영체제는 프로세스가 자원을 요청할 때마다 자원을 할당하고 주기적으로 교착 상태 발생 여부 검사
- 교착 상태가 검출되면 자원 선점을 통해 회복하거나  
  교착 상태에 빠진 프로세스를 강제로 종료하여 회복
