# CPU 스케줄링

운영체제는 여러 프로세스와 스레드에 CPU 사용을 할당하는데 운영체제의 CPU 할당 방법을 **CPU 스케줄링**이라 한다.

---

## 우선순위

모든 프로세스는 CPU의 자원을 필요로 하는데 운영체제는 **공정하고 합리적인 방식으로 CPU 자원을 프로세스에 할당**해야 한다.
운영체제는 프로세스별로 **우선순위(priority)** 를 판단하여 PCB에 명시하고, 우선순위가 높을수록 더 빨리, 더 많이 CPU 자원을 할당한다.  
또한 CPU 활용률을 높이기 위해 **입출력 작업이 많은 프로세스의 우선순위를 높게 유지**한다.

---

### 프로세스 관련 용어

| 용어 | 설명 |
|------|------|
| **CPU 버스트** | 프로세스가 CPU를 이용하는 작업 |
| **입출력 버스트** | 프로세스가 입출력 장치를 기다리는 작업 |
| **CPU 집중 프로세스** | 수학 연산, 그래픽 처리 등 CPU 계산이 많은 프로세스 |
| **입출력 집중 프로세스** | 비디오 재생, 디스크 백업 등 입출력 작업이 많은 프로세스 |

입출력 집중 프로세스는 대기 상태가 많기 때문에 입출력 집중 프로세스를 가능한 끊임없이 실행시키고 남는 시간에 CPU 집중 프로세스에 자원을 배분하는 것이 효율적이다.

---

## 스케줄링 큐

CPU나 입출력 자원을 이용하고자 하는 프로세스들의 **PCB가 삽입되는 자료구조**이다.

- **준비 큐**: CPU를 이용하고자 하는 프로세스의 PCB가 삽입됨  
- **대기 큐**: 입출력 등으로 대기 상태에 있는 프로세스의 PCB가 삽입됨  

운영체제는 큐의 삽입 순서를 기본으로 하되, **우선순위가 높은 프로세스부터 실행**한다.

---

## 스케줄링 방식

### 선점형 스케줄링

운영체제가 **프로세스로부터 CPU를 강제로 빼앗아** 다른 프로세스에 할당할 수 있는 방식

- **장점:** CPU 독점을 방지하고 여러 프로세스에 공정한 자원 분배 가능  
- **단점:** 문맥 교환(Context Switching)으로 인한 **오버헤드 발생**

---

### 비선점형 스케줄링

프로세스가 CPU를 사용 중이라면 **종료되거나 대기 상태로 전환되기 전까지** 다른 프로세스가 끼어들 수 없는 방식

- **장점:** 문맥 교환 횟수가 적어 **오버헤드가 적음**  
- **단점:** CPU를 점유한 프로세스가 끝날 때까지 다른 프로세스는 대기해야 함

---

## CPU 스케줄링 알고리즘

### 1. 선입 선처리 스케줄링 (FCFS, First Come First Served)

- 준비 큐에 **먼저 삽입된 순서대로** CPU를 할당  
- 대기 시간이 길어지는 **호위 효과(Convoy Effect)** 발생 가능

---

### 2. 최단 작업 우선 스케줄링 (SJF, Shortest Job First)

- 준비 큐에서 **CPU 이용 시간이 가장 짧은 프로세스**부터 실행  
- 평균 대기 시간을 최소화하지만 긴 프로세스가 계속 대기하는 문제(아사 현상) 발생 가능

---

### 3. 라운드 로빈 스케줄링 (RR, Round Robin)

- 선입 선처리 스케줄링에 타임 슬라이스(Time Slice)개념을 추가한 방식
- 각 프로세스는 정해진 시간만큼 CPU를 사용한 후 완료되지 않으면 큐의 맨 뒤로 이동

---

### 4. 최소 잔여 시간 우선 스케줄링 (SRT, Shortest Remaining Time)

- 최단 작업 우선 스케줄링 + 라운드 로빈의 혼합형
- 현재 실행 중인 프로세스보다 남은 작업 시간이 더 짧은 프로세스가 도착하면 선점

---

### 5. 우선순위 스케줄링 (Priority Scheduling)

- 각 프로세스에 우선순위를 부여하고 가장 높은 우선순위 프로세스부터 CPU를 할당
- 낮은 우선순위의 프로세스가 계속 밀리는 **아사(Starvation)** 현상 가능
- 해결책으로 **에이징(Aging)** 기법 사용 — 오래 대기한 프로세스의 우선순위를 점진적으로 상승

---

### 6. 다단계 큐 스케줄링 (Multilevel Queue Scheduling)

- 우선순위별로 **여러 개의 준비 큐**를 사용 
- 우선순위가 높은 큐의 프로세스를 먼저 처리하고 해당 큐가 비어 있을 때 다음 우선순위 큐의 프로세스 실행 
- **아사 현상** 발생 가능

---

### 7. 다단계 피드백 큐 (Multilevel Feedback Queue)

- 다단계 큐 스케줄링과 유사하지만 **프로세스가 큐 간 이동이 가능**한 방식 
- 새로 진입한 프로세스는 가장 높은 우선순위 큐에 들어가며 주어진 타임 슬라이스 내에 끝나지 않으면 다음 우선순위 큐로 이동
- CPU를 오래 사용하는 프로세스의 우선순위는 점점 낮아지고 입출력 집중 프로세스는 높은 우선순위 큐에서 빠르게 종료 가능
- 아사 현상이 발생할 수 있으며 에이징 기법으로 완화 가능
